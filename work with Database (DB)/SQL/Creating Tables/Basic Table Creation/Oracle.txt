\\ work with database(DB) — SQL — Creating table — Basic Table Creation — Oracle


To create a basic table in an Oracle database using Go, you will need to use the `database/sql` package along with an Oracle driver such as `github.com/godror/godror`.

### Step-by-Step Guide

1. **Install the Oracle driver for Go**:
   ```bash
   go get -u github.com/godror/godror
   ```

2. **Write the Go code to create a table in Oracle**:

Here's a complete example that demonstrates how to create a table in an Oracle database using Go:

```go
package main

import (
    "database/sql"
    "fmt"
    "log"

    _ "github.com/godror/godror"
)

func main() {
    // Define the Oracle data source name (DSN)
    // Format: user/password@host:port/service_name
    dsn := "username/password@localhost:1521/xe"

    // Open a connection to the database
    db, err := sql.Open("godror", dsn)
    if err != nil {
        log.Fatal(err)
    }
    defer db.Close()

    // Ensure the connection is available
    err = db.Ping()
    if err != nil {
        log.Fatal(err)
    }

    // SQL statement to create a table
    createTableSQL := `CREATE TABLE users (
        id NUMBER GENERATED BY DEFAULT AS IDENTITY,
        username VARCHAR2(50) NOT NULL,
        email VARCHAR2(50) NOT NULL,
        created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
        PRIMARY KEY (id)
    )`

    // Execute the SQL statement
    _, err = db.Exec(createTableSQL)
    if err != nil {
        log.Fatal(err)
    }

    fmt.Println("Table created successfully")
}
```

### Explanation:

1. **Import Packages**: Import the necessary packages. The `database/sql` package provides a generic interface around SQL databases, and `github.com/godror/godror` is the Oracle driver.
2. **Define DSN**: The Data Source Name (DSN) includes the username, password, host, port, and service name in the format `user/password@host:port/service_name`.
3. **Open Database Connection**: Use `sql.Open` to establish a connection to the Oracle database.
4. **Ping Database**: Use `db.Ping()` to verify the connection to the database. This helps catch any configuration issues early.
5. **Create Table SQL Statement**: Define a SQL statement to create a table named `users`. The table has the following columns:
   - `id`: A number that serves as the primary key and is auto-incremented using Oracle's `GENERATED BY DEFAULT AS IDENTITY` clause.
   - `username`: A VARCHAR2(50) field for storing the username.
   - `email`: A VARCHAR2(50) field for storing the email.
   - `created_at`: A TIMESTAMP field that defaults to the current timestamp.
6. **Execute Statement**: Use `db.Exec` to execute the SQL statement. This creates the table in the database.
7. **Close Resources**: Ensure the database connection is closed using `defer` to avoid resource leaks.
8. **Output Success Message**: Print a message indicating that the table was created successfully.

### Running the Code

Save the code to a file, for example, `main.go`, and then run it using the Go command:

```bash
go run main.go
```

Ensure that the Oracle database server is running and accessible with the provided credentials. Adjust the `dsn` variable to match your Oracle database server configuration. This example assumes the Oracle database is running locally on the default port 1521 and you have a database service named `xe`. Adjust accordingly if your setup is different.